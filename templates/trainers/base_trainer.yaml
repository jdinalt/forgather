-- set trainer_def = namespace()
-- from 'inc/formatting.jinja' import h2, h3, sep
-- filter trim()
-- block trainer_meta_config
    -- set trainer_def.name = "Base Trainer"
    -- set trainer_def.description = "A ML model trainer"
    -- block trainer_vars
        ## Define vars like this
        ## -- set trainer_def.foo = '<bar>'
        ##
    << endblock trainer_vars
<< endblock trainer_meta_config

-- block trainer_header
# Name: {{ trainer_def.name }}
# Description: {{ trainer_def.description }}
<< endblock trainer_header
-- endfilter ## trim()


== h3('Trainer Args')

-- filter trim()
-- block trainer_args
.define: &trainer_args
    # Base Trainer Defaults
    # https://huggingface.co/docs/transformers/en/main_classes/trainer#transformers.TrainingArguments
    output_dir: "{{ ns.output_dir }}"
    logging_dir: "{{ ns.logging_dir }}"
    overwrite_output_dir: True
    per_device_train_batch_size: 16
    per_device_eval_batch_size: 16
    learning_rate: 1.0e-3
    num_train_epochs: 1
    eval_steps: 100
    logging_steps: 500
    eval_strategy: "steps"
    save_strategy: "no"
    logging_strategy: "steps"
    lr_scheduler_type: "constant"
    ## use_cpu: True ; Set in config for debugging
<< endblock trainer_args
-- endfilter


== h3('Trainer Constructor')

-- filter trim()
-- block trainer_constructor required
## .define: &trainer
<< endblock trainer_constructor
-- endfilter