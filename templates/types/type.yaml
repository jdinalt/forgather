## This template defines a rough outline for training configurations to follow
## The details should be filled in via a "child" template
-- set ns = namespace()
-- from 'inc/formatting.jinja' import h1, h2, h3
-- filter trim()


-- block base_directories required
    ## -- set ns.models_dir
    ## -- set ns.tokenizers_dir
    ## -- set ns.datasets_dir
-- endblock base_directories


-- block config_metadata
    -- set ns.config_name = "Undefined"
    -- set ns.config_description = "Undefined"
-- endblock config_metadata


-- block globals
## For variables computed from above data
-- endblock globals


-- endfilter ## filter trim() setup
== h1(ns.config_name)
-- filter trim()
-- block header
# {{ utcnow() }}
# Description: {{ ns.config_description }}
# Project Dir: {{ project_dir }}
# Current Working Dir: "{{ getcwd() }}"
# Forgather Config Dir: "{{ forgather_config_dir() }}"

<< endblock header
-- endfilter


== h2('Config Vars')

-- filter trim()
-- block variable_listing
# ns.models_dir: "{{ ns.models_dir }}"
# ns.tokenizers_dir: "{{ ns.tokenizers_dir }}"
# ns.datasets_dir: "{{ ns.datasets_dir }}"
<< endblock variable_listing
-- endfilter


-- filter trim()
-- block main_body required
## Main Body
<< endblock main_body
-- endfilter


== h1('Configuration Output')
-- filter trim()
-- block config_output
    -- filter trim()
    -- block meta_output
meta: &meta_output
    config_name: "{{ ns.config_name }}"
    config_description: "{{ ns.config_description }}"
    project_dir: "{{ project_dir }}"
    models_dir: "{{ ns.models_dir }}"
    tokenizers_dir: "{{ ns.tokenizers_dir }}"
    datasets_dir: "{{ ns.datasets_dir }}"
    << endblock meta_output
    -- endfilter


    -- filter trim()
    -- block main_output required
## main:
    << endblock main_output
    -- endfilter
<< endblock config_output
-- endfilter