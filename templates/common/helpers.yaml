## Custom model constructor
## Defines a constructor for a custom model and registers both the
## configuration and model class for AutoConfig/AutoModel construction.
## The result is that the model implementation will be saved along with the weights.
-- macro custom_model(model_path, model_cls, config_cls, model_config)
!callable:aiws.construct:register_for_auto_class
    - !callable:{{model_path}}:{{model_cls}}
        - !callable:aiws.construct:register_for_auto_class
            - !callable:{{model_path}}:{{config_cls}}
                kwargs: *{{model_config}}
-- endmacro