-- extends 'base_pipeline_project.yaml'

[config_metadata]
    == super()
    -- set ns.config_name = "Auto GPipe with 2 GPUs"
    -- set ns.config_description = "Auto model-split; pipeline with 2 GPUs"
    -- set ns.log_name = "auto_gpipe_2gpu"
    # Change default to auto-split
    -- set ns.trainer_class = 'trainers/auto_pipeline_trainer.yaml'

[trainer_definition]
    -- include 'experiment.trainer_config'

#-------------------- experiment.trainer_config --------------------
-- extends 'base_pipeline_project.trainer_config'

[trainer_meta_config]
    == super()
    -- set ns.pipeline_layers = 16
    -- set ns.pipeline_segments = 2
    -- set ns.pipeline_microbatches = 4
    -- set ns.split_layer_prefix = "causal_lm.layer_stack.layers."
    -- set ns.nproc_per_node = 2
